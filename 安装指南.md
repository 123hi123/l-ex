# 🚀 快速安装指南

## 📥 安装步骤

### 第一步：安装用户脚本管理器

选择适合您浏览器的扩展：

| 浏览器 | 推荐扩展 | 下载链接 |
|--------|---------|---------|
| Chrome / Edge | Tampermonkey | [Chrome 网上应用店](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo) |
| Firefox | Tampermonkey | [Firefox 附加组件](https://addons.mozilla.org/firefox/addon/tampermonkey/) |
| Safari | Userscripts | [App Store](https://apps.apple.com/app/userscripts/id1463298887) |

### 第二步：安装脚本

#### 方法 A：直接复制粘贴（推荐）

1. 点击 Tampermonkey 图标 → "创建新脚本"
2. 删除默认内容
3. 打开 `a.js` 文件，复制全部内容
4. 粘贴到编辑器中
5. 按 `Ctrl + S`（或 `Cmd + S`）保存

#### 方法 B：从 URL 安装

如果您有脚本托管 URL：
1. 点击脚本 URL
2. Tampermonkey 会自动打开安装页面
3. 点击"安装"按钮

### 第三步：验证安装

1. 访问任意 Discourse 论坛（如 [linux.do](https://linux.do)）
2. 打开浏览器控制台（按 F12）
3. 查看是否有以下日志：
   ```
   [Emoji Extension Userscript] Discourse detected, initializing emoji feature
   [Emoji Extension] Click handler attached to textarea
   [Emoji Extension] Paste handler attached to textarea
   ```
4. 进入任意编辑器，应该能看到三个按钮：🐈‍⬛ ⭐ ⎘

---

## ✅ 功能测试

### 测试 1：点击刷新功能

```
1. 进入 Discourse 编辑器
2. 点击 textarea 输入框
3. 观察工具栏按钮是否刷新
```

**预期结果：** 按钮闪烁一下，重新加载

### 测试 2：图片粘贴功能

```
1. 使用截图工具截取一张图片
2. 在编辑器中按 Ctrl+V 粘贴
3. 等待 1-2 秒
4. 观察是否插入了图片链接
```

**预期结果：** 自动插入 `![image](url)` 格式的链接

---

## 🔍 常见问题

### Q1: 脚本没有运行？

**检查项：**
- [ ] Tampermonkey 扩展已安装并启用
- [ ] 脚本在 Tampermonkey 中已启用
- [ ] 访问的是 Discourse 论坛（不是其他网站）
- [ ] 刷新页面试试

**解决方法：**
1. 点击 Tampermonkey 图标
2. 确认"Discourse 表情扩展"脚本已启用（绿色）
3. 刷新 Discourse 页面

---

### Q2: 看不到扩展按钮？

**检查项：**
- [ ] 脚本正在运行（控制台有日志）
- [ ] 在编辑器中（不是查看页面）
- [ ] 等待几秒让脚本加载

**解决方法：**
1. 打开控制台（F12）查看错误
2. 尝试点击 textarea 触发刷新
3. 使用 Tampermonkey 菜单的"手动刷新按钮"

---

### Q3: 图片粘贴不工作？

**检查项：**
- [ ] 粘贴的是图片文件（不是图片链接）
- [ ] 在支持的 Discourse 论坛
- [ ] 浏览器允许剪贴板访问

**解决方法：**
1. 确保复制的是图片本身
2. 尝试不同的截图工具
3. 检查控制台错误信息

---

## 🎯 使用技巧

### 技巧 1：快捷键

| 操作 | Windows/Linux | Mac |
|------|--------------|-----|
| 粘贴图片 | `Ctrl + V` | `Cmd + V` |
| 打开控制台 | `F12` | `Cmd + Option + I` |

### 技巧 2：截图后直接粘贴

最快的使用方式：
```
1. 截图（Win + Shift + S 或其他截图工具）
2. 直接在编辑器中 Ctrl + V
3. 完成！
```

### 技巧 3：按钮消失时

如果扩展按钮消失：
```
→ 只需点击一下 textarea 即可恢复
```

---

## 📚 更多文档

安装完成后，建议阅读：

1. **[快速使用指南.md](快速使用指南.md)** - 了解如何使用各项功能
2. **[README.md](README.md)** - 完整的功能说明
3. **[功能流程图.html](功能流程图.html)** - 可视化的功能流程

---

## 🎊 安装完成检查清单

安装后请确认：

- [ ] Tampermonkey 已安装
- [ ] 脚本已创建并启用
- [ ] 访问 Discourse 论坛能看到按钮
- [ ] 点击 textarea 会刷新按钮
- [ ] 粘贴图片能自动上传

**全部勾选？恭喜您安装成功！🎉**

---

## 🆘 获取帮助

如果遇到问题：

1. 📖 查看 [快速使用指南.md](快速使用指南.md)
2. 🔍 检查浏览器控制台日志
3. 🧪 打开 [测试页面.html](测试页面.html) 查看演示
4. 📚 阅读 [更新说明.md](更新说明.md) 了解技术细节

---

## 🔄 更新脚本

当有新版本时：

1. 在 Tampermonkey 中找到"Discourse 表情扩展"
2. 点击编辑
3. 复制新版本的 `a.js` 内容
4. 全选并粘贴替换
5. 保存

---

<div align="center">

**版本：** 1.1.7  
**状态：** ✅ 稳定可用

---

**准备好了吗？现在就开始使用吧！** 🚀

</div>
