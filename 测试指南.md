# âœ… å¿«é€Ÿæµ‹è¯•æŒ‡å—

## ğŸ¯ æµ‹è¯•å‰å‡†å¤‡

1. âœ… ç¡®ä¿å·²å®‰è£…æ›´æ–°åçš„è„šæœ¬
2. âœ… åˆ·æ–° Discourse é¡µé¢
3. âœ… æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰è§‚å¯Ÿæ—¥å¿—

---

## ğŸ§ª æµ‹è¯•é¡¹ç›®

### æµ‹è¯• 1ï¸âƒ£ï¼šæŒ‰é’®ä¸é‡å¤åˆ›å»º

**æ“ä½œæ­¥éª¤ï¼š**
```
1. æ‰“å¼€ Discourse èŠå¤©æˆ–å›å¤ç¼–è¾‘å™¨
2. ç‚¹å‡» textarea è¾“å…¥æ¡†
3. ç§»å¼€é¼ æ ‡ï¼Œå†æ¬¡ç‚¹å‡» textarea
4. é‡å¤ç‚¹å‡» 3-5 æ¬¡
```

**é¢„æœŸç»“æœï¼š**
- âœ… å·¥å…·æ åªæœ‰ 3 ä¸ªæ‰©å±•æŒ‰é’®ï¼šğŸˆâ€â¬› â­ â˜
- âœ… æŒ‰é’®ä¸ä¼šé‡å¤å‡ºç°
- âœ… æ¯æ¬¡ç‚¹å‡»åæŒ‰é’®ä½ç½®ä¸å˜

**å¤±è´¥è¡¨ç°ï¼š**
- âŒ æ¯æ¬¡ç‚¹å‡»å‡ºç°æ–°çš„æŒ‰é’®ç»„
- âŒ å·¥å…·æ æœ‰å¤šä¸ªç›¸åŒçš„æŒ‰é’®

**æ§åˆ¶å°æ—¥å¿—ï¼š**
```
[Emoji Extension] Textarea clicked, refreshing extension buttons...
[Emoji Extension Userscript] Toolbar found, injecting button.  (åªåœ¨éœ€è¦æ—¶å‡ºç°)
```

---

### æµ‹è¯• 2ï¸âƒ£ï¼šç²˜è´´å®Œæ•´å›¾ç‰‡ URL

**æ“ä½œæ­¥éª¤ï¼š**
```
1. å¤åˆ¶ä»¥ä¸‹é“¾æ¥ï¼š
   https://linux.do/uploads/default/original/4X/f/4/7/f479dbd309305ab14c53fd377cd51e44ee6f455e.webp

2. åœ¨ textarea ä¸­ç‚¹å‡»ï¼Œç¡®ä¿å…‰æ ‡åœ¨è¾“å…¥æ¡†å†…

3. æŒ‰ Ctrl+V (Windows) æˆ– Cmd+V (Mac) ç²˜è´´
```

**é¢„æœŸç»“æœï¼š**
- âœ… è‡ªåŠ¨æ’å…¥ï¼š`![image](https://linux.do/uploads/default/original/4X/f/4/7/f479dbd309305ab14c53fd377cd51e44ee6f455e.webp)`
- âœ… å…‰æ ‡ç§»åŠ¨åˆ°æ’å…¥å†…å®¹å
- âœ… å¦‚æœå‰åæœ‰æ–‡å­—ï¼Œè‡ªåŠ¨æ·»åŠ æ¢è¡Œ

**å¤±è´¥è¡¨ç°ï¼š**
- âŒ ç²˜è´´ååªæ˜¾ç¤ºåŸå§‹é“¾æ¥æ–‡æœ¬
- âŒ æ²¡æœ‰è½¬æ¢ä¸º Markdown æ ¼å¼

**æ§åˆ¶å°æ—¥å¿—ï¼š**
```
[Emoji Extension] Paste event detected, items count: 1
[Emoji Extension] Image URL detected: https://...
[Emoji Extension] Image link inserted successfully
```

---

### æµ‹è¯• 3ï¸âƒ£ï¼šç²˜è´´ç›¸å¯¹è·¯å¾„

**æ“ä½œæ­¥éª¤ï¼š**
```
1. å¤åˆ¶ä»¥ä¸‹ç›¸å¯¹è·¯å¾„ï¼š
   /uploads/default/original/4X/test.jpg

2. åœ¨ textarea ä¸­ç²˜è´´
```

**é¢„æœŸç»“æœï¼š**
- âœ… è‡ªåŠ¨è¡¥å…¨ä¸ºï¼š`![image](https://å½“å‰åŸŸå/uploads/default/original/4X/test.jpg)`
- âœ… åŸŸåè‡ªåŠ¨ä» `window.location.origin` è·å–

**æ§åˆ¶å°æ—¥å¿—ï¼š**
```
[Emoji Extension] Image URL detected: /uploads/default/original/4X/test.jpg
[Emoji Extension] Image link inserted successfully
```

---

### æµ‹è¯• 4ï¸âƒ£ï¼šç²˜è´´å›¾ç‰‡æ–‡ä»¶

**æ“ä½œæ­¥éª¤ï¼š**
```
1. ä½¿ç”¨ä»»æ„æ–¹å¼å¤åˆ¶ä¸€å¼ å›¾ç‰‡ï¼š
   - æˆªå›¾å·¥å…· (Win+Shift+S)
   - ä»æ–‡ä»¶ç®¡ç†å™¨å¤åˆ¶å›¾ç‰‡æ–‡ä»¶
   - æµè§ˆå™¨ä¸­å³é”®å›¾ç‰‡ â†’ å¤åˆ¶å›¾åƒ

2. åœ¨ textarea ä¸­ç²˜è´´
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºä¸Šä¼ æç¤ºï¼ˆæ§åˆ¶å°ï¼‰
- âœ… ç­‰å¾… 1-2 ç§’ä¸Šä¼ å®Œæˆ
- âœ… è‡ªåŠ¨æ’å…¥ä¸Šä¼ åçš„å›¾ç‰‡é“¾æ¥

**å¤±è´¥è¡¨ç°ï¼š**
- âŒ æ²¡æœ‰ä»»ä½•ååº”
- âŒ åªç²˜è´´äº†å›¾ç‰‡æœ¬èº«ï¼ˆä¸æ˜¯é“¾æ¥ï¼‰

**æ§åˆ¶å°æ—¥å¿—ï¼š**
```
[Emoji Extension] Paste event detected, items count: 1
[Emoji Extension] Image file detected, uploading...
[Emoji Extension] Image uploaded and inserted: https://...
```

---

### æµ‹è¯• 5ï¸âƒ£ï¼šå¤–å±‚å®¹å™¨ç²˜è´´

**æ“ä½œæ­¥éª¤ï¼š**
```
1. å¤åˆ¶å›¾ç‰‡é“¾æ¥
2. ç‚¹å‡»è¾“å…¥æ¡†å¤–å±‚å®¹å™¨ï¼ˆ.chat-composer__input-containerï¼‰
3. ç²˜è´´
```

**é¢„æœŸç»“æœï¼š**
- âœ… ä»ç„¶èƒ½æ­£ç¡®æ’å…¥åˆ° textarea ä¸­
- âœ… åŠŸèƒ½ä¸ç›´æ¥åœ¨ textarea ä¸­ç²˜è´´ä¸€è‡´

**æ§åˆ¶å°æ—¥å¿—ï¼š**
```
[Emoji Extension] Paste handler attached to container
[Emoji Extension] Paste event detected, items count: 1
[Emoji Extension] Image link inserted successfully
```

---

## ğŸ“Š æµ‹è¯•æ£€æŸ¥æ¸…å•

å®Œæˆæµ‹è¯•åï¼Œç¡®è®¤ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] æŒ‰é’®ä¸ä¼šé‡å¤åˆ›å»ºï¼ˆæµ‹è¯• 1ï¼‰
- [ ] å¯ä»¥ç²˜è´´å®Œæ•´å›¾ç‰‡ URLï¼ˆæµ‹è¯• 2ï¼‰
- [ ] å¯ä»¥ç²˜è´´ç›¸å¯¹è·¯å¾„ï¼ˆæµ‹è¯• 3ï¼‰
- [ ] å¯ä»¥ç²˜è´´å›¾ç‰‡æ–‡ä»¶å¹¶ä¸Šä¼ ï¼ˆæµ‹è¯• 4ï¼‰
- [ ] å¤–å±‚å®¹å™¨ç²˜è´´ä¹Ÿèƒ½å·¥ä½œï¼ˆæµ‹è¯• 5ï¼‰
- [ ] æ§åˆ¶å°æ²¡æœ‰é”™è¯¯ä¿¡æ¯
- [ ] æ’å…¥çš„å†…å®¹æ ¼å¼æ­£ç¡®

**å…¨éƒ¨å‹¾é€‰ï¼Ÿæ­å–œï¼è„šæœ¬å·¥ä½œæ­£å¸¸ï¼** ğŸ‰

---

## ğŸ› å¦‚æœæµ‹è¯•å¤±è´¥

### æ£€æŸ¥æ­¥éª¤ï¼š

1. **ç¡®è®¤è„šæœ¬å·²æ›´æ–°**
   - åœ¨ Tampermonkey ä¸­æŸ¥çœ‹è„šæœ¬ç‰ˆæœ¬
   - ç¡®è®¤åŒ…å«æœ€æ–°çš„ä¿®å¤ä»£ç 

2. **æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—**
   - æ‰“å¼€ F12 æ§åˆ¶å°
   - æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
   - æ£€æŸ¥æ˜¯å¦æœ‰é¢„æœŸçš„æ—¥å¿—è¾“å‡º

3. **åˆ·æ–°é¡µé¢**
   - æŒ‰ Ctrl+Shift+R (Windows) æˆ– Cmd+Shift+R (Mac) å¼ºåˆ¶åˆ·æ–°
   - æ¸…é™¤ç¼“å­˜åé‡è¯•

4. **æ£€æŸ¥ç¯å¢ƒ**
   - ç¡®è®¤åœ¨æ­£ç¡®çš„ Discourse è®ºå›
   - ç¡®è®¤ Tampermonkey å·²å¯ç”¨
   - ç¡®è®¤è„šæœ¬é’ˆå¯¹å½“å‰åŸŸåå·²å¯ç”¨

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹ç»‘å®šçŠ¶æ€

åœ¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
// æ£€æŸ¥ textarea æ˜¯å¦å·²ç»‘å®š
document.querySelectorAll('textarea.chat-composer__input').forEach(ta => {
    console.log('Click handler:', ta.dataset.emojiExtensionClickHandler);
    console.log('Paste handler:', ta.dataset.emojiExtensionPasteHandler);
});
```

**åº”è¯¥æ˜¾ç¤ºï¼š**
```
Click handler: true
Paste handler: true
```

### æ‰‹åŠ¨æµ‹è¯•ç²˜è´´

åœ¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
// æ‰‹åŠ¨æ’å…¥å›¾ç‰‡é“¾æ¥
const textarea = document.querySelector('textarea.chat-composer__input');
if (textarea) {
    const event = new ClipboardEvent('paste', {
        clipboardData: new DataTransfer()
    });
    // æ¨¡æ‹Ÿç²˜è´´äº‹ä»¶
    textarea.dispatchEvent(event);
}
```

---

## ğŸ“ æŠ¥å‘Šé—®é¢˜

å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œè¯·æä¾›ï¼š

1. **å¤±è´¥çš„æµ‹è¯•é¡¹ç›®**ï¼ˆæµ‹è¯• 1-5 ä¸­çš„å“ªä¸€ä¸ªï¼‰
2. **æ§åˆ¶å°é”™è¯¯ä¿¡æ¯**ï¼ˆå®Œæ•´çš„é”™è¯¯å †æ ˆï¼‰
3. **æµè§ˆå™¨å’Œç‰ˆæœ¬**ï¼ˆå¦‚ï¼šChrome 120ï¼‰
4. **Discourse è®ºå›åœ°å€**ï¼ˆå¦‚ï¼šlinux.doï¼‰
5. **å¤ç°æ­¥éª¤**ï¼ˆè¯¦ç»†æ“ä½œæ­¥éª¤ï¼‰

---

<div align="center">

**å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹æµ‹è¯•ï¼** ğŸš€

æµ‹è¯•é€šè¿‡åï¼Œè¯·æŸ¥çœ‹ [Bugä¿®å¤è¯´æ˜.md](Bugä¿®å¤è¯´æ˜.md) äº†è§£ä¿®å¤è¯¦æƒ…ã€‚

</div>
