# 快速使用指南

## 🎯 新功能概述

您的 Discourse 表情扩展脚本现在支持两个强大的新功能：

### 1️⃣ Textarea 点击自动刷新 ✨

**作用：** 点击编辑器时自动刷新扩展按钮

**使用方法：**
```
1. 在 Discourse 论坛打开任何编辑器
2. 点击 textarea 输入框
3. 三个扩展按钮（🐈‍⬛ ⭐ ⎘）会自动刷新
```

**适用场景：**
- 编辑器按钮消失时
- 切换编辑器后按钮未显示
- 需要确保按钮可用时

---

### 2️⃣ 智能图片粘贴 🖼️

**作用：** 粘贴图片自动上传并插入链接

**使用方法：**
```
1. 复制任意图片（截图/文件等）
2. 在 Discourse 编辑器中粘贴（Ctrl+V / Cmd+V）
3. 脚本自动上传图片
4. 自动插入 Markdown 格式的图片链接
```

**插入格式：**
```markdown
![image](https://your-discourse.com/uploads/xxx.jpg)
```

**支持的位置：**
- 光标当前位置
- 文本末尾（如果没有光标位置）

---

## 🔍 如何验证功能已启用

打开浏览器控制台（F12），查看日志：

```javascript
// 应该能看到以下日志
[Emoji Extension] Click handler attached to textarea
[Emoji Extension] Paste handler attached to textarea
```

---

## 💡 实用技巧

### Textarea 点击刷新
- **问题：** 按钮消失了
- **解决：** 点击一下 textarea 即可恢复

### 图片粘贴
- **技巧 1：** 直接截图后粘贴最方便
- **技巧 2：** 可以从文件管理器复制图片文件后粘贴
- **技巧 3：** 支持所有主流图片格式（jpg, png, gif, webp 等）

---

## ⚙️ 兼容性

| 功能 | Chrome | Firefox | Safari | Edge |
|------|--------|---------|--------|------|
| 点击刷新 | ✅ | ✅ | ✅ | ✅ |
| 图片粘贴 | ✅ | ✅ | ✅ | ✅ |

---

## 🐛 常见问题

### Q: 图片粘贴后没有反应？
**A:** 检查以下几点：
1. 确保复制的是图片文件，不是图片链接
2. 检查浏览器控制台是否有错误
3. 确认 CSRF Token 正确（自动获取）

### Q: 按钮刷新不工作？
**A:** 
1. 检查是否在正确的 textarea 上点击
2. 查看控制台日志确认事件已绑定
3. 尝试手动刷新页面

### Q: 能否在所有编辑器中使用？
**A:** 可以！支持：
- 主题回复编辑器 ✅
- Chat 聊天编辑器 ✅
- 私信编辑器 ✅
- 所有 Discourse 标准编辑器 ✅

---

## 📞 获取帮助

如果遇到问题：
1. 打开浏览器控制台（F12）查看日志
2. 查看 `更新说明.md` 了解技术细节
3. 打开 `测试页面.html` 查看功能演示

---

## 🎉 开始使用

现在就去 Discourse 论坛试试这些新功能吧！

1. 打开任意 Discourse 论坛（如 linux.do）
2. 进入编辑器
3. 点击 textarea → 观察按钮刷新
4. 粘贴图片 → 体验自动上传

祝使用愉快！ 🚀
